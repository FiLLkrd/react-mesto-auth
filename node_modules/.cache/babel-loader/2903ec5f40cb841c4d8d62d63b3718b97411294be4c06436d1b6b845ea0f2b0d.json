{"ast":null,"code":"import _toConsumableArray from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import Main from\"./Main\";import ImagePopup from\"./ImagePopup\";import PopupWithForm from\"./PopupWithForm\";import api from\"../utils/api\";import EditAvatarPopup from\"./EditAvatarPopup\";import EditProfilePopup from\"./EditProfilePopup\";import CurrentUserContext from\"../contexts/CurrentUserContext\";import AddPlacePopup from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editAvatarPopupOpen=_useState2[0],setEditAvatarPopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editProfilePopupOpen=_useState4[0],setEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),addCardPopupOpen=_useState6[0],setAddCardPopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),ImagePopupOpen=_useState8[0],setImagePopupOpen=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),cards=_useState14[0],setCards=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isRenderLoading=_useState16[0],setIsRenderLoading=_useState16[1];useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});api.getCards().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);function handleAvatarPopupClick(){setEditAvatarPopupOpen(true);}function handleProfilePopupClick(){setEditProfilePopupOpen(true);}function handleAddCardPopupClick(){setAddCardPopupOpen(true);}function closePopup(){setEditAvatarPopupOpen(false);setEditProfilePopupOpen(false);setAddCardPopupOpen(false);setImagePopupOpen(false);}function handleCardClick(card){setImagePopupOpen(true);setSelectedCard({name:card.name,link:card.link});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(cardsArr){return cardsArr.filter(function(cardItem){return cardItem._id!==card._id;});});}).catch(function(err){console.log(err);});}function handleCardLike(card){var liked=card.likes.some(function(user){return user._id===currentUser._id;});api.changeLikeCard(card._id,!liked).then(function(newCard){setCards(function(cards){return cards.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}function handleEditAvatar(_ref){var avatar=_ref.avatar;api.editAvatar(avatar).then(function(res){setCurrentUser(res);closePopup();}).catch(function(err){console.log(err);});}function handleEditUser(_ref2){var name=_ref2.name,about=_ref2.about;setIsRenderLoading(true);api.editProfile({name:name,about:about}).then(function(res){setCurrentUser(res);closePopup();}).catch(function(err){console.log(err);});}function handleAddCard(_ref3){var title=_ref3.title,link=_ref3.link;console.log(title,link);api.addNewCard({title:title,link:link}).then(function(res){setCards(function(cards){return[res].concat(_toConsumableArray(cards));});closePopup();}).catch(function(err){console.log(err);});}return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onProfilePopup:handleProfilePopupClick,onAddPopup:handleAddCardPopupClick,onAvatarPopup:handleAvatarPopupClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{opened:editProfilePopupOpen,closed:closePopup,editUserInfo:handleEditUser,isRenderLoading:isRenderLoading}),/*#__PURE__*/_jsx(AddPlacePopup,{opened:addCardPopupOpen,closed:closePopup,openAddPlace:handleAddCard}),/*#__PURE__*/_jsx(ImagePopup,{name:\"fullscreen-image\",card:selectedCard,closed:closePopup,opened:ImagePopupOpen}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete-card\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",buttonText:\"\\u0414\\u0430\",closed:closePopup}),/*#__PURE__*/_jsx(EditAvatarPopup,{opened:editAvatarPopupOpen,closed:closePopup,openEditAvatar:handleEditAvatar})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","Main","ImagePopup","PopupWithForm","api","EditAvatarPopup","EditProfilePopup","CurrentUserContext","AddPlacePopup","App","editAvatarPopupOpen","setEditAvatarPopupOpen","editProfilePopupOpen","setEditProfilePopupOpen","addCardPopupOpen","setAddCardPopupOpen","ImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","isRenderLoading","setIsRenderLoading","getUserInfo","then","res","catch","err","console","log","getCards","handleAvatarPopupClick","handleProfilePopupClick","handleAddCardPopupClick","closePopup","handleCardClick","card","name","link","handleCardDelete","deleteCard","_id","cardsArr","filter","cardItem","handleCardLike","liked","likes","some","user","changeLikeCard","newCard","map","c","handleEditAvatar","avatar","editAvatar","handleEditUser","about","editProfile","handleAddCard","title","addNewCard"],"sources":["/Users/maksimantonov/mesto-react/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport ImagePopup from \"./ImagePopup\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport api from \"../utils/api\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [editAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [editProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [addCardPopupOpen, setAddCardPopupOpen] = useState(false);\n  const [ImagePopupOpen, setImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isRenderLoading, setIsRenderLoading] = useState(false);\n\n  useEffect(() => {\n    api\n      .getUserInfo()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    api\n      .getCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleAvatarPopupClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleProfilePopupClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddCardPopupClick() {\n    setAddCardPopupOpen(true);\n  }\n\n  function closePopup() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddCardPopupOpen(false);\n    setImagePopupOpen(false);\n  }\n\n  function handleCardClick(card) {\n    setImagePopupOpen(true);\n    setSelectedCard({\n      name: card.name,\n      link: card.link,\n    });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((cardsArr) =>\n          cardsArr.filter((cardItem) => cardItem._id !== card._id)\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardLike(card) {\n    const liked = card.likes.some((user) => user._id === currentUser._id);\n    api\n      .changeLikeCard(card._id, !liked)\n      .then((newCard) => {\n        setCards((cards) =>\n          cards.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleEditAvatar({ avatar }) {\n    api\n      .editAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closePopup();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleEditUser({ name, about }) {\n    setIsRenderLoading(true);\n    api\n      .editProfile({ name, about })\n      .then((res) => {\n        setCurrentUser(res);\n        closePopup();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddCard({ title, link }) {\n    console.log(title, link);\n    api\n      .addNewCard({ title, link })\n      .then((res) => {\n        setCards((cards) => [res, ...cards]);\n        closePopup();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          cards={cards}\n          onProfilePopup={handleProfilePopupClick}\n          onAddPopup={handleAddCardPopupClick}\n          onAvatarPopup={handleAvatarPopupClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n        <EditProfilePopup\n          opened={editProfilePopupOpen}\n          closed={closePopup}\n          editUserInfo={handleEditUser}\n          isRenderLoading={isRenderLoading}\n        />\n        <AddPlacePopup\n          opened={addCardPopupOpen}\n          closed={closePopup}\n          openAddPlace={handleAddCard}\n        />\n        <ImagePopup\n          name=\"fullscreen-image\"\n          card={selectedCard}\n          closed={closePopup}\n          opened={ImagePopupOpen}\n        />\n        <PopupWithForm\n          name=\"delete-card\"\n          title=\"Вы уверены?\"\n          buttonText=\"Да\"\n          closed={closePopup}\n        />\n        <EditAvatarPopup\n          opened={editAvatarPopupOpen}\n          closed={closePopup}\n          openEditAvatar={handleEditAvatar}\n        />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}