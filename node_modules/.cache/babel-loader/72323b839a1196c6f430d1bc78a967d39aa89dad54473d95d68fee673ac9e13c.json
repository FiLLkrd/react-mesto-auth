{"ast":null,"code":"import _regeneratorRuntime from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/maksimantonov/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var API=/*#__PURE__*/function(){function API(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,API);this._baseUrl=baseUrl;this._headers=headers;}_createClass(API,[{key:\"_checkError\",value:function _checkError(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"getUserInfo\",value:function(){var _getUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:this._headers});case 2:res=_context.sent;return _context.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context.stop();}},_callee,this);}));function getUserInfo(){return _getUserInfo.apply(this,arguments);}return getUserInfo;}()},{key:\"getCards\",value:function(){var _getCards=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"GET\",headers:this._headers});case 2:res=_context2.sent;return _context2.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context2.stop();}},_callee2,this);}));function getCards(){return _getCards.apply(this,arguments);}return getCards;}()},{key:\"editProfile\",value:function(){var _editProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})});case 2:res=_context3.sent;return _context3.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context3.stop();}},_callee3,this);}));function editProfile(_x){return _editProfile.apply(this,arguments);}return editProfile;}()},{key:\"addNewCard\",value:function(){var _addNewCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"POST\",headers:this._headers,body:JSON.stringify({name:data.title,link:data.link})});case 2:res=_context4.sent;return _context4.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context4.stop();}},_callee4,this);}));function addNewCard(_x2){return _addNewCard.apply(this,arguments);}return addNewCard;}()},{key:\"deleteCard\",value:function(){var _deleteCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){var res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:\"DELETE\",headers:this._headers});case 2:res=_context5.sent;return _context5.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context5.stop();}},_callee5,this);}));function deleteCard(_x3){return _deleteCard.apply(this,arguments);}return deleteCard;}()},{key:\"editAvatar\",value:function(){var _editAvatar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(link){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:link})});case 2:res=_context6.sent;return _context6.abrupt(\"return\",this._checkError(res));case 4:case\"end\":return _context6.stop();}},_callee6,this);}));function editAvatar(_x4){return _editAvatar.apply(this,arguments);}return editAvatar;}()},{key:\"changeLikeCard\",value:function(){var _changeLikeCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(cardId,liked){var res,res_2;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(!liked){_context7.next=7;break;}_context7.next=3;return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:this._headers});case 3:res=_context7.sent;return _context7.abrupt(\"return\",this._checkError(res));case 7:_context7.next=9;return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:this._headers});case 9:res_2=_context7.sent;return _context7.abrupt(\"return\",this._checkError(res_2));case 11:case\"end\":return _context7.stop();}},_callee7,this);}));function changeLikeCard(_x5,_x6){return _changeLikeCard.apply(this,arguments);}return changeLikeCard;}()}]);return API;}();var api=new API({baseUrl:\"https://mesto.nomoreparties.co/v1/cohort-56\",headers:{authorization:\"5dc5c8be-be79-400a-b4fa-a8894eb1d6c6\",\"Content-type\":\"application/json\"}});export default api;","map":{"version":3,"names":["API","baseUrl","headers","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","_checkError","data","body","JSON","stringify","name","about","title","link","id","avatar","cardId","liked","res_2","api","authorization"],"sources":["/Users/maksimantonov/mesto-react/src/utils/api.js"],"sourcesContent":["class API {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkError(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  async getUserInfo() {\n    const res = await fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: this._headers,\n    });\n    return this._checkError(res);\n  }\n\n  async getCards() {\n    const res = await fetch(`${this._baseUrl}/cards`, {\n      method: \"GET\",\n      headers: this._headers,\n    });\n    return this._checkError(res);\n  }\n\n  async editProfile(data) {\n    const res = await fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    });\n    return this._checkError(res);\n  }\n\n  async addNewCard(data) {\n    const res = await fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.title,\n        link: data.link,\n      }),\n    });\n    return this._checkError(res);\n  }\n\n  async deleteCard(id) {\n    const res = await fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    });\n    return this._checkError(res);\n  }\n\n  async editAvatar(link) {\n    const res = await fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: link,\n      }),\n    });\n    return this._checkError(res);\n  }\n\n  async changeLikeCard(cardId, liked) {\n    if (liked) {\n      const res = await fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: \"PUT\",\n        headers: this._headers,\n      });\n      return this._checkError(res);\n    } else {\n      const res_2 = await fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: \"DELETE\",\n        headers: this._headers,\n      });\n      return this._checkError(res_2);\n    }\n  }\n}\n\nconst api = new API({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-56\",\n  headers: {\n    authorization: \"5dc5c8be-be79-400a-b4fa-a8894eb1d6c6\",\n    \"Content-type\": \"application/json\",\n  },\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}